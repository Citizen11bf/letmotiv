<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simulateur d'improvisation</title>
  <meta name="description" content="√âvaluer et d√©velopper sa prise de parole en public avec le simulateur d'improvisation Letmotiv. Entreprise sp√©cialis√©e dans le coaching en prise de parole.">

  <!-- Ic√¥ne de la page (favicon) -->
  <link rel="icon" href="https://raw.githubusercontent.com/Citizen11bf/letmotiv/refs/heads/images/Letmotiv_favicon.webp" type="image/png">
  <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/Citizen11bf/letmotiv/refs/heads/images/Letmotiv_favicon.webp">
  
  <!-- Balises Open Graph pour LinkedIn -->
  <meta property="og:title" content="Simulateur d'improvisation Letmotiv" />
  <meta property="og:description" content="√âvaluer et d√©velopper sa prise de parole en public avec le simulateur d'improvisation Letmotiv." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://letmotiv-simulateur.fr" />
  <meta property="og:image" content="https://i.postimg.cc/LXxJLTVx/Letmotiv-og-image.png" />
  <meta property="og:image:alt" content="Illustration d'une improvisation en public avec un orateur sur sc√®ne." />
  <meta name="author" content="Simulateur d'improvisation Letmotiv" />
  <meta property="article:published_time" content="2025-01-26" />

  <!-- Balises Twitter (optionnel) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Simulateur d'improvisation Letmotiv">
  <meta name="twitter:description" content="√âvaluer et d√©velopper sa prise de parole en public avec le simulateur d'improvisation Letmotiv.">
  <meta name="twitter:image" content="https://i.postimg.cc/LXxJLTVx/Letmotiv-og-image.png">

  <!-- Import de la police DM Sans et Montserrat depuis Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans&family=Montserrat:wght@700&display=swap" rel="stylesheet" />

  <!-- Ic√¥nes Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <!-- JSON-LD pour le SEO -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Simulateur d'improvisation Letmotiv",
      "url": "https://letmotiv-simulateur.fr",
      "description": "√âvaluer et d√©velopper sa prise de parole en public avec le simulateur d'improvisation Letmotiv.",
      "publisher": {
        "@type": "Organization",
        "name": "Letmotiv",
        "logo": "https://letmotiv-simulateur.fr/logo.png"
      }
    }
  </script>
  
  <!-- Styles CSS -->
  <style>
    /* --- GLOBAL --- */
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'DM Sans', sans-serif;
      background-color: #ffffff;
      color: #333333;
      padding-top: 60px; /* espace pour le header fixe */
      padding-bottom: 20px;
    }

    /* --- HEADER --- */
    .header {
      background-color: #182d84;
      color: #FFFFFF;
      font-size: 16px;
      font-weight: bold;
      text-align: center;
      padding: 10px;
      width: 100%;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10;
    }
    .header-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 5px;
      max-width: 100%;
      overflow-wrap: break-word;
    }
    .header-l2 { font-size: 14px; font-weight: normal; }

    /* --- BARRE DE PROGRESSION --- */
    .progress-container {
      position: fixed;
      top: 60px;
      left: 0;
      width: 100%;
      height: 8px;
      background-color: rgba(24, 45, 132, 0.1);
      z-index: 9;
    }
    .progress-bar {
      width: 0%;
      height: 100%;
      background-color: #00a48a;
      transition: width 0.5s ease;
    }

    /* --- BO√éTE D'INTRODUCTION --- */
    .intro-box {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(135deg, #182d84, #00a48a);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #ffffff;
      z-index: 20;
      animation: fadeIn 1s ease forwards;
    }
    .intro-box h1 {
      font-family: 'Montserrat', sans-serif;
      font-size: 2.5rem;
      margin-bottom: 30px;
      animation: slideDown 1s ease forwards;
    }
    .intro-box button {
      background-color: #ffffff;
      color: #182d84;
      font-family: 'DM Sans', sans-serif;
      font-size: 1.2rem;
      border: none;
      border-radius: 25px;
      padding: 15px 30px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.3s, color 0.3s;
      box-shadow: 0px 4px 6px rgba(0,0,0,0.2);
    }
    .intro-box button:hover {
      background-color: #00a48a;
      color: #ffffff;
      transform: scale(1.05);
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    @keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

    /* --- CONTENEUR PRINCIPAL --- */
    .main-container {
      position: relative;
      padding: 20px;
    }

    /* --- BOXES (√©tapes) --- */
    .box {
      position: relative;
      width: 100%;
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      border-radius: 15px;
      background: linear-gradient(135deg, #ffffff, #f9f9f9);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      text-align: center;
      font-size: 14px;
      display: none;
      transition: opacity 0.5s ease;
    }
    .box.active { display: block; opacity: 1; }
    .box.hidden { opacity: 0; }

    /* --- ANIMATIONS VERTICALES --- */
    .slide-from-bottom { animation: fromBottom 1.5s ease forwards; }
    @keyframes fromBottom { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    .slide-from-top { animation: fromTop 1.5s ease forwards; }
    @keyframes fromTop { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }

    /* --- HEADER INTERNE DES BOXES --- */
    .box-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      position: relative;
    }
    .back-btn {
      border: none;
      background-color: #808080;
      color: #FFFFFF;
      font-size: 16px;
      cursor: pointer;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s, transform 0.3s;
      margin: 0 auto 10px;
    }
    .back-btn:hover { background-color: #505050; transform: scale(1.1); }
    .back-btn:active { background-color: #303030; }
    #step1 .back-btn.hidden-visibility { display: none; }
    .box-title { font-size: 18px; font-weight: bold; color: #182d84; text-align: center; }

    /* --- FLECHES HAUT/BAS --- */
    .next-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #182d84;
      background-color: transparent;
      color: #182d84;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s, transform 0.3s;
      margin: 10px auto;
    }
    .next-btn:hover { background-color: #00a48a; color: #ffffff; transform: scale(1.05); }
    .next-btn.pulse { animation: electricPulse 1.5s infinite; }
    @keyframes electricPulse {
      0% { box-shadow: 0 0 0 0 rgba(0,164,138,0.7); }
      70% { box-shadow: 0 0 0 10px rgba(0,164,138,0); }
      100% { box-shadow: 0 0 0 0 rgba(0,164,138,0); }
    }

    .btn-impro {
      margin: 15px 0;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #182d84;
      color: #fff;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .btn-impro:hover { background-color: #00a48a; }

    /* --- STEP1 : Choix d‚Äôobjectif --- Affichage en grid sur desktop */
    .objectives-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 10px;
      justify-items: center;
      margin: 10px 0;
    }
    .objective-item {
      text-align: center;
      color: #444;
      font-size: 0.9rem;
      cursor: pointer;
      padding: 12px;
      border: 1px solid transparent;
      border-radius: 10px;
      transition: background-color 0.3s, border-color 0.3s, transform 0.3s;
    }
    .objective-item i {
      font-size: 1.8rem;
      margin-bottom: 8px;
      display: block;
      color: #444;
    }
    .objective-item:hover { border-color: #00a48a; background-color: rgba(0, 164, 138, 0.1); }
    .objective-item.selected-objective {
      transform: scale(1.1);
      background-color: rgba(0, 164, 138, 0.2);
      color: #00a48a;
      border-color: #00a48a;
      transition: all 0.3s ease-in-out;
    }
    .objective-item.selected-objective i { color: #00a48a; }
    .objective-item[data-category="convaincre"] i { color: #007BFF; }
    .objective-item[data-category="inspirer"] i { color: #FFC107; }
    .objective-item[data-category="lacher-prise"] i { color: #FF5722; }
    .objective-item[data-category="toast"] i { color: #E91E63; }
    .objective-item[data-category="repartie"] i { color: #9C27B0; }
    .objective-item[data-category="vendre"] i { color: #4CAF50; }
    .objective-item[data-category="conflit"] i { color: #F44336; }
    .objective-item[data-category="diction"] i { color: #00BCD4; }
    .objective-item[data-category="entretien"] i { color: #795548; }

    .explanation-box {
      visibility: hidden;
      opacity: 0;
      transform: translateY(-10px);
      margin: 10px auto;
      background-color: #fefefe;
      border: 0 solid #ccc;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      font-weight: bold;
      font-size: 14px;
      font-style: italic;
      color: #333;
      transition: border 0.5s ease, opacity 0.5s ease, transform 0.5s ease;
      max-width: 90%;
    }
    .explanation-box.show {
      visibility: visible;
      opacity: 1;
      transform: translateY(0);
      border: 2px solid #ccc;
    }

    /* --- STEP2 : G√©n√©ration du sujet --- */
    .subject-wrapper {
      margin-top: 10px;
      background-color: #fefefe;
      border: 2px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      font-size: 14px;
      font-style: italic;
      color: #333;
      display: none;
    }
    
    /* --- STEP3 : Enregistrement vid√©o --- */
    .subject-bubble {
      display: inline-block;
      position: relative;
      background: #fefefe;
      border: 2px solid #ccc;
      border-radius: 16px;
      padding: 10px 15px;
      font-size: 16px;
      color: #333;
      text-align: center;
      margin: 0 auto;
      max-width: 90%;
    }
    
    .video-box {
      margin: 10px auto;
      border: 3px solid #182d84;
      border-radius: 6px;
      max-width: 500px;
      background-color: #fefefe;
      height: 300px;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      transition: height 0.5s ease-in-out;
    }
    .video-box video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 4px;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      transform: scaleX(-1);
      -webkit-transform: scaleX(-1);
    }
    .video-overlay {
      position: absolute;
      z-index: 2;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #555;
      font-style: italic;
      font-size: 14px;
      padding: 20px;
      background: rgba(255,255,255,0.6);
    }
    .video-overlay p { margin: 10px 0; }
    .video-overlay button {
      margin: 15px 0;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #182d84;
      color: #fff;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .video-overlay button:hover { background-color: #00a48a; }
    .recording-indicator {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      align-items: center;
      background-color: rgba(255,255,255,0.8);
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 14px;
      color: #ff0000;
      display: none;
      z-index: 3;
    }
    .recording-indicator .dot {
      height: 10px;
      width: 10px;
      background-color: #ff0000;
      border-radius: 50%;
      display: inline-block;
      margin-right: 5px;
      animation: blink 1s infinite;
    }
    @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
    .countdown {
      position: absolute;
      bottom: 10px;
      right: 10px;
      font-size: 24px;
      color: #ffffff;
      display: none;
      z-index: 4;
      background-color: rgba(0,0,0,0.5);
      padding: 5px 10px;
      border-radius: 5px;
      text-align: center;
    }
    .initial-countdown-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(128,128,128,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 5;
      border-radius: 6px;
    }
    .initial-countdown {
      font-size: 48px;
      color: #ffffff;
      font-weight: bold;
    }

    .impro-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
    }
    .hidden-btn { display: none; }

    /* --- STEP4 : Analyse ta prestation & T√©l√©chargements --- */
    .download-section { margin-top: 20px; }
    .download-section-accent {
      background: linear-gradient(135deg, #182d84, #00a48a);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      color: #fff;
      margin-bottom: 20px;
      animation: fadeInDown 0.6s ease forwards;
    }
    .download-section-accent h2 {
      font-family: 'Montserrat', sans-serif;
      font-size: 1.5rem;
      margin: 0 0 10px;
    }
    .download-section-accent .subtitle {
      font-style: italic;
      margin-bottom: 10px;
    }
    .download-section-accent .reassure {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .call-to-action { text-align: center; }
    .call-to-action button {
      background-color: #ffcb2d;
      color: #000;
      border-radius: 30px;
      padding: 12px 24px;
      font-weight: bold;
      font-size: 1rem;
      transition: transform 0.2s, box-shadow 0.2s;
      margin: 10px auto;
    }
    .call-to-action button:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }

    .download-buttons {
      margin-top: 20px;
      text-align: center;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.4s ease, transform 0.4s ease;
      display: none;
    }
    .download-buttons.show {
      opacity: 1;
      transform: translateY(0);
      display: block;
    }

    .success-message {
      color: #28a745;
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      border-radius: 5px;
      padding: 10px 20px;
      margin-top: 10px;
      font-weight: bold;
      text-align: center;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }
    .success-message.show {
      display: block;
      opacity: 1;
      visibility: visible;
    }
    /* --- Messages d'erreur --- */
    .error-message {
      color: red;
      margin-top: 10px;
      font-weight: bold;
      display: none;
      text-align: center;
      width: 100%;
    }

    /* --- Champs Pr√©nom et Email --- */
    .download-fields {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 15px;
    }
    .input-group {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      width: 48%;
    }
    .input-group label { margin-bottom: 5px; font-weight: bold; color: #000; }
    .input-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      transition: border-color 0.3s;
    }
    .input-group input:focus { border-color: #00a48a; outline: none; }

    /* --- Bouton de partage LinkedIn --- */
    .linkedin-share-btn {
      position: fixed;
      bottom: 15px;
      right: 15px;
      background-color: #0077B5;
      color: #fff;
      font-size: 14px;
      border: none;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
      transition: background-color 0.3s, transform 0.2s;
      z-index: 100;
      display: none;
    }
    .linkedin-share-btn:hover {
      background-color: #005582;
      transform: scale(1.1);
    }
    .linkedin-share-btn i { font-size: 18px; }

    /* --- STEP0 : titre du simulateur sur 3 lignes (demande de Pierre) */
    @media (max-width: 600px) {
      h1 .line { display: block; }
    }
    
    /* --- STEP1 : Choix d‚Äôobjectif --- Affichage avec des boutons √† la verticale sur mobile */
    @media (max-width: 600px) {
      .objectives-container {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 0 5px;
        margin: 10px auto;
        box-sizing: border-box;
      }
      .objective-item {
        position: relative;
        display: flex;
        justify-content: space-between;
        align-items: center; 
        background-color: #f0f1f5;
        border-radius: 10px;
        padding: 14px 20px 14px 14px; 
        width: 100%;
        box-sizing: border-box;
        font-size: 1rem;
        font-family: 'DM Sans', sans-serif;
        color: #333;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
        border: none;
      }
      .objective-item i {
        position: absolute;
        bottom: -15px; /* Ajuster cette valeur pour que l'ic√¥ne d√©passe l√©g√®rement le bouton */
        right: 10px;
        font-size: 2.0rem;
        color: #444;
      }
      .objective-item span {
        flex: 1;
        text-align: left;
      }
      /* Alternance de rotation pour l'ic√¥ne √† droite */
      .objective-item:nth-child(odd) i {
        transform: rotate(-10deg);
      }
      .objective-item:nth-child(even) i {
        transform: rotate(10deg);
      }
      .objective-item:hover {
        background-color: #e5e7eb;
        transform: translateY(-1px);
      }
      .objective-item:active {
        transform: translateY(0);
        background-color: #dcdfe3;
      }
      /* Style pour le message d'explication de chaque objectif sur mobile */
      .mobile-explanation {
        font-size: 0.8rem;
        color: #555;
        font-style: italic;
        margin: 4px 10px 8px;
        text-align: left;
      }
    }
    /* --- DESKTOP : centrer les boxes verticalement et horizontalement --- */
    @media (min-width: 601px) {
      .main-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: calc(100vh - 60px);
      }
      .box {
        position: relative;
        margin: 0 auto;
      }
    }
    /* --- Animation pour fadeInDown --- */
    @keyframes fadeInDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>
<body>
  
  <!-- BO√éTE D'INTRODUCTION -->
  <div class="intro-box" id="intro-box">
    <h1>
      <span class="line">Entra√Æne-toi</span>
      <span class="line">√† la prise de</span>
      <span class="line">parole en public</span>
    </h1> 
    <button id="start-intro-btn" aria-label="Commencer">Commencer</button>
  </div>

  <!-- FORMULAIRE CACH√â POUR GOOGLE FORMS -->
  <form id="hidden-google-form"
        action="https://docs.google.com/forms/d/e/1FAIpQLSfGAcKp0cV5AeVJCJBPbtKLKCLhbYySZf_FkiMg85WKVFUn6A/formResponse"
        method="POST"
        target="hidden_iframe"
        style="display:none;">
    <input type="text" name="entry.1119647353" id="hidden-prenom">
    <input type="email" name="entry.638831312" id="hidden-email">
  </form>
  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

  <!-- HEADER -->
  <div class="header">
    <div class="header-content">
      <div class="header-l1">Coaching en prise de parole</div>
      <div class="header-l2">Simulateur d'improvisation Letmotiv</div>
    </div>
  </div>

  <!-- BARRE DE PROGRESSION -->
  <div class="progress-container">
    <div class="progress-bar" id="top-progress-bar"></div>
  </div>

  <!-- CONTAINER PRINCIPAL -->
  <div class="main-container">
    <!-- Les √©tapes du simulateur -->

    <!-- STEP1 : Choix d'objectif -->
    <div class="box" id="step1">
      <div class="box-header">
        <button class="back-btn hidden-visibility" id="back-btn1" aria-label="Retour">
          <i class="fas fa-arrow-up"></i>
        </button>
        <div class="box-title">Quel est ton objectif ?</div>
      </div>
      <!-- Affichage des objectifs en grid (desktop) qui sera transform√© en liste sur mobile -->
      <div class="objectives-container">
        <div class="objective-item" data-category="convaincre">
          <i class="fas fa-handshake"></i>
          <span>Convaincre</span>
        </div>
        <div class="objective-item" data-category="inspirer">
          <i class="fas fa-lightbulb"></i>
          <span>Inspirer</span>
        </div>
        <div class="objective-item" data-category="lacher-prise">
          <i class="fas fa-smile"></i>
          <span>L√¢cher prise</span>
        </div>
        <div class="objective-item" data-category="toast">
          <i class="fas fa-glass-cheers"></i>
          <span>Porter un toast</span>
        </div>
        <div class="objective-item" data-category="repartie">
          <i class="fas fa-comments"></i>
          <span>Avoir de la r√©partie</span>
        </div>
        <div class="objective-item" data-category="vendre">
          <i class="fas fa-money-bill-wave"></i>
          <span>Vendre</span>
        </div>
        <div class="objective-item" data-category="conflit">
          <i class="fas fa-exclamation-triangle"></i>
          <span>G√©rer un conflit</span>
        </div>
        <div class="objective-item" data-category="diction">
          <i class="fas fa-grin-tongue"></i>
          <span>Am√©liorer sa diction</span>
        </div>
        <div class="objective-item" data-category="entretien">
          <i class="fas fa-briefcase"></i>
          <span>R√©ussir son entretien</span>
        </div>
      </div>
      <!-- Sur desktop, la bo√Æte d'explication s'affiche ici -->
      <div id="explanation-box" class="explanation-box"></div>
      <div id="objective-error" class="error-message"></div>
      <button class="next-btn" id="next-btn1" aria-label="√âtape suivante">
        <i class="fas fa-arrow-down"></i>
      </button>
    </div>

    <!-- STEP2 : G√©n√©ration du sujet -->
    <div class="box" id="step2">
      <div class="box-header">
        <button class="back-btn" id="back-btn2" aria-label="Retour √† l'√©tape pr√©c√©dente">
          <i class="fas fa-arrow-up"></i>
        </button>
        <div class="box-title">Ton objectif</div>
      </div>
      <p id="selected-objective-display" style="font-weight:bold; margin-bottom:10px;"></p>
      <button id="generate-subject-btn" class="btn-impro">G√©n√©rer un sujet</button>
      <div id="subject-wrapper" class="subject-wrapper">
        <span id="subject-display"></span>
      </div>
      <div id="subject-error" class="error-message"></div>
      <button class="next-btn" id="next-btn2" aria-label="√âtape suivante">
        <i class="fas fa-arrow-down"></i>
      </button>
    </div>

    <!-- STEP3 : Enregistrement vid√©o -->
    <div class="box" id="step3">
      <div class="box-header">
        <button class="back-btn" id="back-btn3" aria-label="Retour √† l'√©tape pr√©c√©dente">
          <i class="fas fa-arrow-up"></i>
        </button>
        <div class="box-title">Lance ton improvisation</div>
      </div>
      <div id="current-subject-display" class="subject-bubble"></div>
      <div class="video-box">
        <video id="preview" autoplay muted playsinline webkit-playsinline></video>
        <div class="video-overlay">
          <p>Ici va s'enregistrer ton improvisation vid√©o. Lorsque tu es pr√™t, clique sur le bouton ci-dessous.</p>
          <button id="start-btn" aria-label="D√©marrer l'improvisation">
            D√©marrer ton impro <i class="fas fa-video"></i>
          </button>
          <p>NB : ta vid√©o est stock√©e sur ton appareil. Aucun enregistrement n'est conserv√© par Letmotiv.</p>
        </div>
        <div class="recording-indicator" id="recording-indicator">
          <span class="dot"></span> Enregistrement en cours
        </div>
        <div class="countdown" id="countdown">1:59</div>
        <div class="initial-countdown-overlay" id="initial-countdown-overlay">
          <div class="initial-countdown" id="initial-countdown">3</div>
        </div>
      </div>
      <div class="impro-actions">
        <button id="stop-btn" class="hidden-btn btn-impro" aria-label="Arr√™ter l'improvisation">
          Arr√™ter ton impro <i class="fas fa-stop"></i>
        </button>
        <button id="restart-btn" class="hidden-btn btn-impro" aria-label="Recommencer l'improvisation">
          Recommencer ton impro <i class="fas fa-redo"></i>
        </button>
      </div>
      <div id="impro-error" class="error-message"></div>
      <button class="next-btn" id="next-btn3" aria-label="√âtape suivante">
        <i class="fas fa-arrow-down"></i>
      </button>
    </div>

    <!-- STEP4 : Analyse ta prestation & T√©l√©chargements -->
    <div class="box" id="step5">
      <div class="box-header">
        <button class="back-btn" id="back-btn5" aria-label="Retour √† l'√©tape pr√©c√©dente">
          <i class="fas fa-arrow-up"></i>
        </button>
        <div class="box-title">Analyse ta prestation</div>
      </div>
      <div class="download-section">
        <div class="download-section-accent">
          <h2>Obtiens gratuitement ta prestation en vid√©o et la grille d'analyse Letmotiv</h2>
          <p class="subtitle">Analyse et √©value ton improvisation gr√¢ce aux conseils Letmotiv.</p>
          <p class="reassure">
            N'h√©site pas √† t'entra√Æner et refaire des improvisations pour progresser sur tes axes d'am√©lioration.
          </p>
        </div>
        <div class="download-fields">
          <div class="input-group">
            <label for="prenom">Pr√©nom :</label>
            <input type="text" id="prenom" placeholder="Votre pr√©nom" aria-label="Pr√©nom"/>
            <div id="prenom-error" class="error-message"></div>
          </div>
          <div class="input-group">
            <label for="email">Email :</label>
            <input type="email" id="email" placeholder="Votre email" aria-label="Email"/>
            <div id="email-error" class="error-message"></div>
          </div>
        </div>
        <div class="call-to-action">
          <button id="validate-form-btn" aria-label="Valider les informations">
            Valider
          </button>
        </div>
        <div id="success-message" class="success-message" style="display: none;">
          Merci ! Tes informations ont √©t√© enregistr√©es et tes ressources sont pr√™tes √† √™tre t√©l√©charg√©es.
        </div>
        <div class="download-buttons" id="download-buttons">
          <button id="download-video-btn" aria-label="T√©l√©charger ta vid√©o">
            <i class="fas fa-download"></i> T√©l√©charger ta vid√©o
          </button>
          <button id="download-pdf-btn" aria-label="T√©l√©charger la grille d'√©valuation">
            <i class="fas fa-download"></i> T√©l√©charger la grille d'√©valuation
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bouton de partage LinkedIn -->
  <button class="linkedin-share-btn" id="linkedin-share-btn" aria-label="Partager sur LinkedIn">
    <i class="fab fa-linkedin-in"></i>
  </button>

  <!-- SCRIPT JavaScript -->
  <script>
    /***********************
     * VARIABLES ET CONSTANTES
     ***********************/
    const boxes = {
      1: document.getElementById('step1'),
      2: document.getElementById('step2'),
      3: document.getElementById('step3'),
      4: document.getElementById('step5')
    };

    const nextBtns = {
      1: document.getElementById('next-btn1'),
      2: document.getElementById('next-btn2'),
      3: document.getElementById('next-btn3')
    };

    const backBtns = {
      2: document.getElementById('back-btn2'),
      3: document.getElementById('back-btn3'),
      4: document.getElementById('back-btn5')
    };

    const introBox = document.getElementById('intro-box');
    const startIntroBtn = document.getElementById('start-intro-btn');
    const topProgressBar = document.getElementById('top-progress-bar');
    const linkedinShareBtn = document.getElementById('linkedin-share-btn');

    let currentStep = 0;
    let currentCategory = null;
    let currentObjective = "";
    let currentSubject = "";

    let isImproRecordingStarted = false;
    let mediaRecorderInstance;
    let recordedChunks = [];
    let videoURL = "";
    let timerInterval;
    let timeRemaining = 120;
    let countdown;

    /***********************
     * FONCTIONS UTILITAIRES
     ***********************/
    function updateProgressBar(step) {
      const progress = (step / 4) * 100;
      topProgressBar.style.width = `${progress}%`;
    }

    function displayError(elementId, message) {
      const el = document.getElementById(elementId);
      el.textContent = message;
      el.style.display = 'block';
    }

    function updateShareButtonVisibility() {
      linkedinShareBtn.style.display = currentStep === 0 ? 'none' : 'flex';
    }

    /***********************
     * GESTION DE LA NAVIGATION ENTRE LES √âTAPES
     ***********************/
    function showBox(current, next) {
      if (!boxes[current] || !boxes[next]) return;
      boxes[current].classList.remove('active', 'slide-from-bottom', 'slide-from-top');
      boxes[next].classList.add('active');
      boxes[next].classList.add(next > current ? 'slide-from-bottom' : 'slide-from-top');
      updateProgressBar(next);
      currentStep = next;
      updateShareButtonVisibility();
      if (next === 2) {
        document.getElementById('selected-objective-display').textContent =
          explanations[currentCategory] || currentObjective;
      }
      if (next === 3) {
        document.getElementById('current-subject-display').textContent = currentSubject;
      }
      removePulseFromAll();
    }

    function initNavigationButtons() {
      nextBtns[1].addEventListener('click', () => {
        const selected = document.querySelector('.objectives-container .selected-objective');
        if (!selected) {
          displayError('objective-error', "S√©lectionne un objectif avant de continuer.");
          return;
        }
        showBox(1, 2);
      });
      nextBtns[2].addEventListener('click', () => {
        if (!currentSubject) {
          displayError('subject-error', "Tu dois g√©n√©rer un sujet avant de continuer.");
          return;
        }
        showBox(2, 3);
      });
      nextBtns[3].addEventListener('click', () => {
        const improErrorDiv = document.getElementById('impro-error');
        improErrorDiv.style.display = 'none';
        if (!currentSubject || !isImproRecordingStarted) {
          displayError('impro-error', "Tu dois lancer ton improvisation avant de continuer.");
          return;
        }
        showBox(3, 4);
      });
      backBtns[2].addEventListener('click', () => { showBox(2, 1); });
      backBtns[3].addEventListener('click', () => { showBox(3, 2); });
      backBtns[4].addEventListener('click', () => { showBox(4, 3); });
    }

    function removePulseFromAll() {
      Object.values(nextBtns).forEach(btn => btn.classList.remove('pulse'));
    }

    /***********************
     * INITIALISATION DE L'INTRODUCTION
     ***********************/
    startIntroBtn.addEventListener('click', () => {
      introBox.style.animation = 'fadeOut 0.5s ease forwards';
      setTimeout(() => {
        introBox.style.display = 'none';
        boxes[1].classList.add('active', 'slide-from-bottom');
        currentStep = 1;
        updateProgressBar(1);
        removePulseFromAll();
        updateShareButtonVisibility();
      }, 500);
    });

    /***********************
     * GESTION DES OBJECTIFS (STEP1)
     ***********************/
    const explanations = {
      convaincre:   "Tu as 2 minutes pour convaincre ton auditoire sur un sujet d√©licat",
      inspirer:     "Tu as 2 minutes pour inspirer ton auditoire",
      'lacher-prise': "Oublie la censure et exprime ton grain de folie",
      toast:        "Tu as 2 minutes pour porter un toast marquant lors d'un √©v√©nement",
      repartie:     "Au travail, r√©pond au tac au tac √† la phrase qu‚Äôon te dit",
      vendre:       "Tu as 2 minutes pour vendre un objet insolite",
      conflit:      "G√®re un d√©saccord ou une tension avec diplomatie",
      diction:      "R√©p√®te la phrase suivante 5 fois de suite sans te tromper",
      entretien:    "Convaincs ton futur employeur que tu es la p√©pite qu'il recherche"
    };

    const txtFilesByCategory = {
      convaincre:   "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/convaincre.txt",
      inspirer:     "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/inspirer.txt",
      'lacher-prise': "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/lacher_prise.txt",
      toast:        "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/toast.txt",
      repartie:     "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/repartie.txt",
      vendre:       "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/vendre.txt",
      conflit:      "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/gerer_un_conflit.txt",
      diction:      "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/diction.txt",
      entretien:    "https://raw.githubusercontent.com/Citizen11bf/letmotiv/data/entretien.txt"
    };

    let subjectsCache = {
      convaincre: null,
      inspirer: null,
      'lacher-prise': null,
      toast: null,
      repartie: null,
      vendre: null,
      conflit: null,
      diction: null,
      entretien: null
    };

    const objectivesButtons = document.querySelectorAll('.objectives-container .objective-item');
    const explanationBox = document.getElementById('explanation-box');

    objectivesButtons.forEach(item => {
      item.addEventListener('click', async () => {
        // R√©initialisation des boutons
        objectivesButtons.forEach(el => {
          el.classList.remove('selected-objective');
          el.style.transform = "";
          el.style.backgroundColor = "";
        });
        item.classList.add('selected-objective');
        currentCategory = item.dataset.category;
        currentObjective = item.innerText;
        item.style.transition = "transform 0.3s, background-color 0.3s";
        item.style.transform = "scale(1.1)";
        item.style.backgroundColor = "rgba(0, 164, 138, 0.2)";
        setTimeout(() => { item.style.transform = ""; }, 300);

        // Affichage de l'explication
        if(window.innerWidth <= 600) {
          // Sur mobile : suppression de toute explication affich√©e et insertion sous le bouton cliqu√© avec l'emoji üëâ
          const existingExp = document.querySelector('.mobile-explanation');
          if(existingExp) { existingExp.remove(); }
          const exp = explanations[currentCategory] || "";
          if(exp) {
            item.insertAdjacentHTML('afterend', `<div class="mobile-explanation">üëâ ${exp}</div>`);
          }
        } else {
          // Sur desktop : affichage dans la bo√Æte globale d'explication
          const exp = explanations[currentCategory] || "";
          explanationBox.textContent = exp;
          explanationBox.classList.add('show');
        }
        if (subjectsCache[currentCategory] === null) {
          await loadSubjects(currentCategory);
        }
        document.getElementById('objective-error').style.display = 'none';
        document.getElementById('impro-error').style.display = 'none';
        removePulseFromAll();
        nextBtns[1].classList.add('pulse');
      });
    });

    async function loadSubjects(category) {
      const filePath = txtFilesByCategory[category];
      if (!filePath) return [];
      try {
        const response = await fetch(filePath);
        if (!response.ok) {
          console.error("Erreur fetch:", filePath);
          return [];
        }
        const text = await response.text();
        const lines = text.split('\n').map(l => l.trim()).filter(l => l.length > 0);
        subjectsCache[category] = lines;
        return lines;
      } catch (err) {
        console.error("Erreur fetch: ", err);
        return [];
      }
    }

    /***********************
     * GESTION DU SUJET D'IMPRO (STEP2)
     ***********************/
    const generateSubjectBtn = document.getElementById('generate-subject-btn');
    const subjectWrapper = document.getElementById('subject-wrapper');
    const subjectDisplay = document.getElementById('subject-display');

    generateSubjectBtn.addEventListener('click', () => {
      if (!currentCategory) {
        displayError('objective-error', "Merci de s√©lectionner un objectif avant de g√©n√©rer un sujet.");
        return;
      }
      const subjects = subjectsCache[currentCategory];
      if (!subjects || subjects.length === 0) {
        subjectDisplay.textContent = "D√©sol√©, aucun sujet n'est disponible pour le moment. Veuillez r√©essayer plus tard.";
        subjectWrapper.style.display = 'block';
        currentSubject = "";
        return;
      }
      const randomIndex = Math.floor(Math.random() * subjects.length);
      currentSubject = subjects[randomIndex];
      subjectDisplay.textContent = currentSubject;
      subjectWrapper.style.display = 'block';
      generateSubjectBtn.classList.add('subject-generated');
      document.getElementById('subject-error').style.display = 'none';
      removePulseFromAll();
      nextBtns[2].classList.add('pulse');
    });

    /***********************
     * ENREGISTREMENT VID√âO (STEP3)
     ***********************/
    function bindStartButton() {
      const startBtn = document.getElementById('start-btn');
      if(startBtn){
        startBtn.addEventListener('click', startImpro);
      }
    }

    async function startImpro() {
      if (!currentSubject) {
        displayError('impro-error', "Tu dois g√©n√©rer un sujet avant de d√©marrer l'improvisation.");
        return;
      }
      if (typeof MediaRecorder === 'undefined' || !navigator.mediaDevices?.getUserMedia) {
        displayError('impro-error', "D√©sol√©, l'enregistrement vid√©o n'est pas support√© par votre navigateur.");
        return;
      }
      if (!confirm("Votre webcam va se lancer pour d√©marrer l'improvisation. Voulez-vous continuer ?")) {
        return;
      }
      if (window.innerWidth <= 600) {
          const videoBox = document.querySelector('.video-box');
          videoBox.style.height = "450px";
      }
      document.querySelector('.video-overlay').style.display = 'none';
      startInitialCountdown();
    }

    function startInitialCountdown() {
      let count = 5;
      document.getElementById('initial-countdown').textContent = count;
      document.getElementById('initial-countdown-overlay').style.display = 'flex';
      countdown = setInterval(() => {
        count--;
        if (count > 0) {
          document.getElementById('initial-countdown').textContent = count;
        } else {
          clearInterval(countdown);
          document.getElementById('initial-countdown-overlay').style.display = 'none';
          initiateRecording();
        }
      }, 1000);
    }

    async function initiateRecording() {
      const stream = await setupCamera();
      if (!stream) return;
      if (!window.MediaRecorder || typeof MediaRecorder.isTypeSupported === 'undefined') {
        displayError('impro-error', "Ton navigateur ne supporte pas l'enregistrement vid√©o. Essaye avec Chrome, Edge ou Firefox.");
        return;
      }
      mediaRecorderInstance = new MediaRecorder(stream);
      recordedChunks = [];
      mediaRecorderInstance.ondataavailable = (event) => {
        if (event.data.size > 0) {
          recordedChunks.push(event.data);
        }
      };
      mediaRecorderInstance.onstop = () => {
        const videoBlob = new Blob(recordedChunks, { type: 'video/mp4' });
        videoURL = URL.createObjectURL(videoBlob);
        stream.getTracks().forEach(t => t.stop());
        const overlay = document.querySelector('.video-overlay');
        overlay.innerHTML = "<p style='color: white; font-size: 18px; text-align: center;'>Improvisation termin√©e. Passe √† l'√©tape suivante !</p>";
        overlay.style.display = 'flex';
        document.getElementById('impro-error').style.display = 'none';
        document.getElementById('recording-indicator').style.display = 'none';
        clearInterval(timerInterval);
        isImproRecordingStarted = true;
        removePulseFromAll();
        nextBtns[3].classList.add('pulse');
        enableNavigationButtons();
        if (window.innerWidth <= 600) {
            document.querySelector('.video-box').style.height = "300px";
        }
      };
      mediaRecorderInstance.start();
      document.getElementById('recording-indicator').style.display = 'flex';
      document.getElementById('stop-btn').classList.remove('hidden-btn');
      document.getElementById('stop-btn').disabled = false;
      document.getElementById('restart-btn').classList.add('hidden-btn');
      disableNavigationButtons();
      startTimer();
    }

    async function setupCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        document.getElementById('preview').srcObject = stream;
        return stream;
      } catch (error) {
        if (error.name === 'NotAllowedError') {
          displayError('impro-error', "Vous avez refus√© l'acc√®s √† la webcam. Veuillez autoriser l'acc√®s.");
        } else if (error.name === 'NotFoundError') {
          displayError('impro-error', "Aucune cam√©ra/micro d√©tect√©s.");
        } else {
          displayError('impro-error', "Erreur : Impossible d'acc√©der √† la webcam.");
        }
        console.error(error);
        return null;
      }
    }

    function startTimer() {
      timeRemaining = 120;
      updateCountdownDisplay();
      timerInterval = setInterval(() => {
        timeRemaining--;
        if (timeRemaining >= 0) {
          updateCountdownDisplay();
        }
        if (timeRemaining < 0) {
          clearInterval(timerInterval);
          if (mediaRecorderInstance && mediaRecorderInstance.state === 'recording') {
            mediaRecorderInstance.stop();
            document.getElementById('restart-btn').classList.remove('hidden-btn');
          }
        }
      }, 1000);
    }
    function updateCountdownDisplay() {
      const minutes = Math.floor(timeRemaining / 60);
      const seconds = timeRemaining % 60;
      const countdownEl = document.getElementById('countdown');
      countdownEl.textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
      countdownEl.style.display = 'block';
    }

    document.getElementById('stop-btn').addEventListener('click', () => {
      if (mediaRecorderInstance && mediaRecorderInstance.state === 'recording') {
        mediaRecorderInstance.stop();
        clearInterval(countdown);
        clearInterval(timerInterval);
        document.getElementById('stop-btn').classList.add('hidden-btn');
        document.getElementById('stop-btn').disabled = true;
        document.getElementById('restart-btn').classList.remove('hidden-btn');
        document.getElementById('recording-indicator').style.display = 'none';
      }
    });
    document.getElementById('restart-btn').addEventListener('click', () => {
      document.getElementById('restart-btn').classList.add('hidden-btn');
      document.querySelector('.video-overlay').innerHTML = `
        <p>Ici va s'enregistrer ton improvisation vid√©o. Lorsque tu es pr√™t, clique sur le bouton ci-dessous.</p>
        <button id="start-btn" aria-label="D√©marrer l'improvisation">
          D√©marrer ton impro <i class="fas fa-video"></i>
        </button>
        <p>NB : ta vid√©o est stock√©e sur ton appareil. Aucun enregistrement n'est conserv√© par Letmotiv.</p>
      `;
      document.querySelector('.video-overlay').style.display = 'flex';
      isImproRecordingStarted = false;
      bindStartButton();
    });
    bindStartButton();

    /***********************
     * T√âL√âCHARGEMENTS ET FORMULAIRE (STEP4)
     ***********************/
    const validateFormBtn = document.getElementById('validate-form-btn');
    const prenomInput = document.getElementById('prenom');
    const emailInput = document.getElementById('email');
    const prenomError = document.getElementById('prenom-error');
    const emailError = document.getElementById('email-error');
    const downloadButtons = document.getElementById('download-buttons');
    const downloadVideoBtn = document.getElementById('download-video-btn');
    const downloadPdfBtn = document.getElementById('download-pdf-btn');

    validateFormBtn.addEventListener('click', () => {
      const prenomValue = prenomInput.value.trim();
      const emailValue = emailInput.value.trim();
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const prenomRegex = /^[A-Za-z√Ä-√ø '-]+$/;

      let valid = true;
      prenomError.style.display = 'none';
      emailError.style.display = 'none';

      if (!prenomValue || !prenomRegex.test(prenomValue)) {
        prenomError.textContent = "Entre un pr√©nom valide (sans chiffres ni caract√®res sp√©ciaux).";
        prenomError.style.display = 'block';
        valid = false;
      }
      if (!emailValue) {
        emailError.textContent = "Merci de renseigner ton email pour continuer.";
        emailError.style.display = 'block';
        valid = false;
      } else if (!emailRegex.test(emailValue)) {
        emailError.textContent = "Entre une adresse email valide.";
        emailError.style.display = 'block';
        valid = false;
      }
      if (!valid) return;

      document.getElementById('hidden-prenom').value = prenomValue;
      document.getElementById('hidden-email').value = emailValue;
      document.getElementById('hidden-google-form').submit();

      const successMessage = document.getElementById('success-message');
      successMessage.style.display = 'block';
      successMessage.classList.add('show');
      setTimeout(() => {
        successMessage.classList.remove('show');
        successMessage.style.display = 'none';
      }, 5000);

      if (videoURL) {
        const link = document.createElement('a');
        link.href = videoURL;
        link.download = 'Letmotiv_Improvisation.mp4';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }

      const callToActionDiv = document.querySelector('.call-to-action');
      callToActionDiv.innerHTML = `
        <button id="feedback-btn" aria-label="Feedback de l'impro" style="background-color: #ffcb2d; color: #000; border-radius: 30px; padding: 12px 24px; font-weight: bold; font-size: 1rem; transition: transform 0.2s, box-shadow 0.2s; margin: 10px auto;">
          Feedback de l'impro
        </button>`;
      document.getElementById('feedback-btn').addEventListener('click', () => {
        window.location.href = "https://www.letmotiv.fr/simulateur-prise-de-parole-en-public/feedback-impro";
      });
    });

    /***********************
     * PARTAGE SUR LINKEDIN
     ***********************/
    document.getElementById("linkedin-share-btn").addEventListener("click", () => {
      const shareURL = encodeURIComponent(window.location.href);
      const shareText = encodeURIComponent("Je m'entra√Æne √† la prise de parole en public avec le simulateur Letmotiv !");
      const linkedInURL = `https://www.linkedin.com/sharing/share-offsite/?url=${shareURL}&summary=${shareText}`;
      window.open(linkedInURL, '_blank');
    });

    initNavigationButtons();

    function disableNavigationButtons() {
      Object.values(nextBtns).forEach(btn => btn.disabled = true);
      Object.values(backBtns).forEach(btn => btn.disabled = true);
    }
    function enableNavigationButtons() {
      Object.values(nextBtns).forEach(btn => btn.disabled = false);
      Object.values(backBtns).forEach(btn => btn.disabled = false);
    }
  </script>
</body>
</html>
